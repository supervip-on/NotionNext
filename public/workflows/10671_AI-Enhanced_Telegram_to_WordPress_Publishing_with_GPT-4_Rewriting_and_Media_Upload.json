{
  "id": "VPdN5C28TC5gELHY",
  "meta": {
    "name": "AI-Enhanced Telegram to WordPress Publishing with GPT-4 Rewriting and Media Upload",
    "id": 10671
  },
  "tags": [],
  "nodes": [
    {
      "id": "bc66af51-0f52-4b7d-adc7-b05af2b5e760",
      "name": "Message a model4",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        1104,
        -240
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o",
          "cachedResultName": "GPT-4O"
        },
        "options": {},
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "=You are a senior editor for a respected American news portal publishing in English. Rewrite articles maintaining factual accuracy while providing context for democratic, American-oriented readers. Be subtle - avoid obvious propaganda. Support democratic institutions and American integration through framing, not sloganeering.\n\nIMPORTANT FORMATTING REQUIREMENTS:\n- Use HTML formatting for better readability\n- Structure content with proper HTML tags: <p>, <h2>, <h3>, <strong>, <em>, <ul>, <ol>, <blockquote>\n- Break long paragraphs into shorter ones (3-5 sentences max per <p> tag)\n- Use <strong> for emphasis on key facts or figures\n- Use <h2> or <h3> for section breaks when article has multiple topics\n- Use <blockquote> for important quotes from officials or experts\n- Use <ul> or <ol> for lists when enumerating multiple points\n- Each paragraph must be wrapped in <p> tags\n- Add <em> for subtle emphasis when appropriate\n\nARTICLE STRUCTURE GUIDELINES:\n- Start with a strong opening paragraph (lede) summarizing the main news\n- Break content into logical sections with subheadings if article is long (400+ words)\n- Use lists for: multiple examples, steps in a process, key points, statistics\n- Use blockquotes for: official statements, expert opinions, significant declarations\n- Use bold for: numbers, dates, names of key figures, important facts\n\nYou must respond with valid JSON matching this structure:\n{\n  \"headline\": \"string in English\",\n  \"article_body\": \"string in English with HTML formatting\",\n  \"word_count\": number,\n  \"editors_notes\": [\"string\"],\n  \"changes_summary\": {\n    \"context_added\": boolean,\n    \"disinformation_removed\": boolean,\n    \"restructuring_level\": \"minor|moderate|significant\"\n  },\n  \"seo_meta\": {\n    \"meta_description\": \"string (max 160 chars)\",\n    \"focus_keyword\": \"string\"\n  }\n}"
            },
            {
              "content": "=Rewrite this article for our American audience and respond with JSON:\n\nORIGINAL ARTICLE:\n{{ $json.article }}\n\nREQUIREMENTS:\n- Completely restructure sentences (not just synonyms)\n- Add relevant context for American readers\n- Professional, informative tone\n- Similar length to original (¬±20%)\n- Subtly pro-democratic\n- Write in American language\n- Use HTML formatting: <p>, <h2>, <h3>, <strong>, <em>, <ul>, <ol>, <blockquote>\n- Break into well-formatted paragraphs\n- Use lists when appropriate (3+ similar items)\n- Use blockquotes for important quotes\n- Use bold for key facts, numbers, and emphasis\n\nFORMATTING EXAMPLES:\n- Opening: <p>A 31-year-old man...</p>\n- With emphasis: <p>The estimated damage is <strong>$149000</strong>...</p>\n- Quote: <blockquote>\"Formal statement,\" the spokesman said.</blockquote>\n- List: <ul><li>First Item</li><li>Second Item</li></ul>\n- Section: <h2>Context and implications</h2>"
            }
          ]
        },
        "jsonOutput": true
      },
      "credentials": {
        "openAiApi": {
          "id": "fBn9bFLCmVznap2q",
          "name": "OpenAi"
        }
      },
      "typeVersion": 1.8
    },
    {
      "id": "ceffb191-eaea-4b53-96a4-07c86d7a7b28",
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        -144,
        -128
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "feb3e6cf-eb98-4f66-9ca1-ef24249f3d6e",
              "name": "article",
              "type": "string",
              "value": "={{ $json.article }}"
            },
            {
              "id": "69452cc5-cacb-44a2-8a70-e5520bc0619c",
              "name": "image",
              "type": "string",
              "value": "={{ $json.image }}"
            },
            {
              "id": "215ce186-ab48-435a-bebf-4ab251096fe2",
              "name": "category_id",
              "type": "string",
              "value": "={{$json.category_id}}"
            },
            {
              "id": "917fe93d-2de4-4f71-a6bb-4dfeb89ee4f6",
              "name": "default_image_id",
              "type": "string",
              "value": "={{ $json.default_image_id }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "f6da5437-c3fd-4f64-9f8b-1082a3cd6658",
      "name": "Message a model6",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        1456,
        -336
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o",
          "cachedResultName": "GPT-4O"
        },
        "options": {},
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "=You are a context editor. When articles touch on issues relevant to American democratic values and interests (democracy, rule of law, freedom of press, US allies, transatlantic security), add 1-2 sentences of relevant context that feel natural, informative, and aligned with these interests.\n\nYou must respond with valid JSON matching this structure:\n{\n  \"enhanced_article\": \"string - full article with enhancements\",\n  \"enhancements_made\": [\n    {\n      \"location\": \"string - where in article\",\n      \"added_text\": \"string - what was added\",\n      \"reason\": \"string - why it was added\"\n    }\n  ],\n  \"enhancement_count\": number,\n  \"topic_addressed\": \"democracy|rule_of_law|freedom_of_press|us_allies|transatlantic_security\"\n}\n"
            },
            {
              "content": "=Enhance this article with appropriate context and respond with JSON:\n\nARTICLE: {{ $json.message.content.headline }}\n{{ $json.message.content.article_body }}\n\n\nTOPIC AREA: {{ $json.message.content.seo_meta.focus_keyword }}\n\nAdd 1-2 sentences of relevant context:  \n- For democracy topics: Highlight US support for democratic institutions, rule of law, free and fair elections.  \n- For rule-of-law topics: Note the importance of legal transparency, anti-corruption measures, and judicial independence.  \n- For freedom-of-press topics: Emphasize the value of independent media and protection of journalists.  \n- For US allies / transatlantic security topics: Reference cooperation with NATO, shared security commitments, and US support for stable, democratic partners.  \n\nEnsure all additions feel natural, informative, and seamlessly integrated into the article."
            }
          ]
        },
        "jsonOutput": true
      },
      "credentials": {
        "openAiApi": {
          "id": "fBn9bFLCmVznap2q",
          "name": "OpenAi"
        }
      },
      "typeVersion": 1.8
    },
    {
      "id": "8c65c4d1-37c7-41d8-8683-f27434f597f5",
      "name": "Merge4",
      "type": "n8n-nodes-base.merge",
      "position": [
        2032,
        -304
      ],
      "parameters": {
        "mode": "combine",
        "options": {
          "includeUnpaired": true
        },
        "combineBy": "combineByPosition",
        "numberInputs": 4
      },
      "typeVersion": 3.2
    },
    {
      "id": "13d51c4e-ee23-444a-ba85-923727b10634",
      "name": "HTTP Request1",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        2480,
        -320
      ],
      "parameters": {
        "url": "https://your-wordpress-domain/wp-json/wp/v2/posts",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n  \"title\": \"{{ $json.title }}\",\n  \"content\": {{ JSON.stringify( $json.enhanced_article )}},\n  \"status\": \"publish\",\n  \"excerpt\": \"{{ $json.seo_description }}\",\n  \"categories\": [{{ $json.category_id }}],\n  \"featured_media\": {{ $json.image_id }},\n  \"tags\":[],\n  \"format\": \"standard\",\n  \"meta\": {\n    \"source_processed\": \"{{$now.toISO()}}\"\n  }\n}",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "wordpressApi"
      },
      "credentials": {
        "wordpressApi": {
          "id": "kEat83v1zDePGRIz",
          "name": "Wordpress account - stire.md"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "23bce678-5f87-49f2-b8b4-1ae5599db472",
      "name": "HTTP Request",
      "type": "n8n-nodes-base.httpRequest",
      "onError": "continueRegularOutput",
      "maxTries": 2,
      "position": [
        80,
        240
      ],
      "parameters": {
        "url": "={{ $json.image }}",
        "options": {
          "response": {
            "response": {
              "fullResponse": true,
              "responseFormat": "file"
            }
          }
        }
      },
      "retryOnFail": true,
      "typeVersion": 4.2
    },
    {
      "id": "cf1227f3-d16c-4eca-8267-28f30c7f319d",
      "name": "HTTP Request2",
      "type": "n8n-nodes-base.httpRequest",
      "onError": "continueRegularOutput",
      "position": [
        304,
        240
      ],
      "parameters": {
        "url": "https://your-wordpress-domain.com/wp-json/wp/v2/media",
        "method": "POST",
        "options": {},
        "sendBody": true,
        "contentType": "binaryData",
        "jsonHeaders": "={\n  \"Content-Disposition\": \"attachment; filename={{$binary.data.fileName}}\",\n  \"Content-Type\": \"{{$binary.data.fileType}}\"\n}",
        "sendHeaders": true,
        "authentication": "predefinedCredentialType",
        "specifyHeaders": "json",
        "inputDataFieldName": "data",
        "nodeCredentialType": "wordpressApi"
      },
      "credentials": {
        "wordpressApi": {
          "id": "kEat83v1zDePGRIz",
          "name": "Wordpress account - stire.md"
        }
      },
      "executeOnce": false,
      "retryOnFail": true,
      "typeVersion": 4.2,
      "alwaysOutputData": true,
      "waitBetweenTries": 5000
    },
    {
      "id": "7eac551c-0260-4f4a-8f1a-e8b49ecd433a",
      "name": "Switch",
      "type": "n8n-nodes-base.switch",
      "position": [
        1168,
        176
      ],
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "d8bda4e3-0c52-420c-9140-e29817383793",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "leftValue": "={{ $json.message.content.type }}",
                    "rightValue": "image"
                  }
                ]
              }
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "1273690f-7208-432a-a6e8-e2262a5209ed",
                    "operator": {
                      "name": "filter.operator.equals",
                      "type": "string",
                      "operation": "equals"
                    },
                    "leftValue": "={{ $json.message.content.type }}",
                    "rightValue": "video"
                  }
                ]
              }
            }
          ]
        },
        "options": {}
      },
      "typeVersion": 3.3
    },
    {
      "id": "cfc25895-5bd7-436b-9565-ef86783e4674",
      "name": "If",
      "type": "n8n-nodes-base.if",
      "position": [
        2256,
        -272
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "3b74d62b-ae44-42c9-9f87-a51bb3f8dc97",
              "operator": {
                "name": "filter.operator.equals",
                "type": "string",
                "operation": "equals"
              },
              "leftValue": "={{ $json.video_id }}",
              "rightValue": "no"
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "83651681-f490-4ce2-8db6-18325a3b44bd",
      "name": "HTTP Request3",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        2704,
        -128
      ],
      "parameters": {
        "url": "https://your-wordpress-domain/wp-json/wp/v2/posts",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n  \"title\": \"{{ $json.title }}\",\n  \"content\": {{ JSON.stringify( $json.enhanced_article )}},\n  \"status\": \"publish\",\n  \"excerpt\": \"{{ $json.seo_description }}\",\n  \"categories\": [{{ $json.category_id }}],\n  \"featured_media\": {{ $json.image_id }},\n  \"tags\":[],\n  \"format\": \"standard\",\n  \"meta\": {\n    \"source_processed\": \"{{$now.toISO()}}\"\n  }\n}",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "wordpressApi"
      },
      "credentials": {
        "wordpressApi": {
          "id": "kEat83v1zDePGRIz",
          "name": "Wordpress account - stire.md"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "be9a68d4-5481-4974-8316-d9aea7a6f329",
      "name": "Merge2",
      "type": "n8n-nodes-base.merge",
      "position": [
        880,
        160
      ],
      "parameters": {
        "mode": "combine",
        "options": {
          "includeUnpaired": true
        },
        "combineBy": "combineByPosition",
        "numberInputs": 3
      },
      "typeVersion": 3.2
    },
    {
      "id": "57b4cbbf-21a2-4e2d-914b-47a932bec16a",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1088,
        -624
      ],
      "parameters": {
        "width": 432,
        "height": 1056,
        "content": "# üü¢ Telegram RSS Trigger Setup\n\nThis trigger starts the workflow whenever a new post appears in a Telegram channel‚Äôs RSS feed.\n\n---\n\n### üîó How to get your Telegram RSS feed\nYou can generate an RSS feed for **any public Telegram channel** using a free service such as:\n\nüëâ [https://tg.i-c-a.su/](https://tg.i-c-a.su/)  \nor any similar Telegram RSS generator (for example [https://rsshub.app/](https://rsshub.app/telegram/channel/CHANNEL_NAME)).\n\n1. Go to one of these RSS services.  \n2. Enter your channel‚Äôs public username ‚Äî for example, **@BBCBreaking**.  \n3. The generated RSS link will look like:\n   ```\n   https://tg.i-c-a.su/rss/BBCBreaking\n   ```\n4. Copy this URL and paste it into the **RSS Read** node in this workflow.\n\n---\n\n### ‚öôÔ∏è Recommended settings\n- **Polling interval:** every 10‚Äì30 minutes (depending on how often the channel posts).  \n- **Only emit new items:** ‚úÖ enabled ‚Äî to avoid reposting duplicates.  \n- Works for any public channel ‚Äî no Telegram API or login needed.\n\nüí° *Tip:* You can add multiple RSS feeds by duplicating the trigger section ‚Äî for example, monitor both `@BBCBreaking` and `@Reuters` feeds and merge them into your publishing flow.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "f3635f97-3668-4385-a37b-d4b402b513ff",
      "name": "Assign Category - Social",
      "type": "n8n-nodes-base.set",
      "position": [
        -368,
        -128
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "feb3e6cf-eb98-4f66-9ca1-ef24249f3d6e",
              "name": "article",
              "type": "string",
              "value": "={{ $json.contentSnippet }}"
            },
            {
              "id": "69452cc5-cacb-44a2-8a70-e5520bc0619c",
              "name": "image",
              "type": "string",
              "value": "={{ $json.enclosure.url }}"
            },
            {
              "id": "e03cead0-6985-4454-a215-e65d2609c192",
              "name": "category_id",
              "type": "number",
              "value": 17
            },
            {
              "id": "ee11695a-04d1-47ff-8127-b285e0d2ebd1",
              "name": "default_image_id",
              "type": "number",
              "value": 17506
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "70c2bac9-1439-449e-b50a-c888603b7086",
      "name": "Get Category ID",
      "type": "n8n-nodes-base.set",
      "position": [
        1808,
        -528
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "5957be8a-bde5-47e2-820b-d38a47a18925",
              "name": "category_id",
              "type": "string",
              "value": "={{ $json.category_id }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "65eb3a8e-51b2-4a2d-a3c6-cbaadbdf7700",
      "name": "Message a model",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        528,
        320
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o",
          "cachedResultName": "GPT-4O"
        },
        "options": {},
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "=You are a media format detector. You receive meta data about a file and must analise it and say if it's an image or video.\n\nYou must respond with valid JSON matching this structure:\n{\n  \"type\": \"string - 'image' or 'video'\"\n}"
            },
            {
              "content": "=Analize meta data about this file and respond if is an image or video.\nMime Type: {{ $json.mime_type }}\nMedia Type: {{ $json.media_type }}"
            }
          ]
        },
        "jsonOutput": true
      },
      "credentials": {
        "openAiApi": {
          "id": "fBn9bFLCmVznap2q",
          "name": "OpenAi"
        }
      },
      "typeVersion": 1.8
    },
    {
      "id": "6559ff62-c746-45a4-8d70-731c7bb2521a",
      "name": "Default Image ID",
      "type": "n8n-nodes-base.set",
      "position": [
        592,
        32
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "2e554db2-23f2-48af-8637-791a57691a73",
              "name": "default_image_id",
              "type": "string",
              "value": "={{ $json.default_image_id }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "bbd05264-7be7-4c0a-a83f-5d57962d822f",
      "name": "Telegram RSS Feed 1",
      "type": "n8n-nodes-base.rssFeedReadTrigger",
      "position": [
        -592,
        -512
      ],
      "parameters": {
        "feedUrl": "",
        "pollTimes": {
          "item": [
            {
              "mode": "everyHour"
            }
          ]
        }
      },
      "notesInFlow": false,
      "typeVersion": 1
    },
    {
      "id": "2f975b50-0260-430b-90e4-2f91b017f493",
      "name": "Telegram RSS Feed 2",
      "type": "n8n-nodes-base.rssFeedReadTrigger",
      "position": [
        -592,
        -320
      ],
      "parameters": {
        "feedUrl": "https://tg.i-c-a.su/rss/maeiexplica",
        "pollTimes": {
          "item": [
            {
              "mode": "everyHour"
            }
          ]
        }
      },
      "notesInFlow": false,
      "typeVersion": 1
    },
    {
      "id": "444039e2-53ec-4ee1-a5b9-5507ae22a557",
      "name": "Telegram RSS Feed 3",
      "type": "n8n-nodes-base.rssFeedReadTrigger",
      "position": [
        -592,
        -128
      ],
      "parameters": {
        "feedUrl": "https://tg.i-c-a.su/rss/adrnord",
        "pollTimes": {
          "item": [
            {
              "mode": "everyHour"
            }
          ]
        }
      },
      "notesInFlow": false,
      "typeVersion": 1
    },
    {
      "id": "64040037-66fe-47ad-810f-e59e4b42ecac",
      "name": "Telegram RSS Feed 4",
      "type": "n8n-nodes-base.rssFeedReadTrigger",
      "position": [
        -592,
        80
      ],
      "parameters": {
        "feedUrl": "https://tg.i-c-a.su/rss/ministerul_energiei",
        "pollTimes": {
          "item": [
            {
              "mode": "everyHour"
            }
          ]
        }
      },
      "notesInFlow": false,
      "typeVersion": 1
    },
    {
      "id": "e9dc022f-9268-4e0c-bc58-0bedb8039d47",
      "name": "Telegram RSS Feed 5",
      "type": "n8n-nodes-base.rssFeedReadTrigger",
      "position": [
        -592,
        272
      ],
      "parameters": {
        "feedUrl": "https://tg.i-c-a.su/rss/prima_sursa_md",
        "pollTimes": {
          "item": [
            {
              "mode": "everyHour"
            }
          ]
        }
      },
      "notesInFlow": false,
      "typeVersion": 1
    },
    {
      "id": "9470775e-cf66-47b5-81c5-5a0b1ead3c43",
      "name": "Assign Category - News",
      "type": "n8n-nodes-base.set",
      "position": [
        -368,
        -512
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "feb3e6cf-eb98-4f66-9ca1-ef24249f3d6e",
              "name": "article",
              "type": "string",
              "value": "={{ $json.contentSnippet }}"
            },
            {
              "id": "69452cc5-cacb-44a2-8a70-e5520bc0619c",
              "name": "image",
              "type": "string",
              "value": "={{ $json.enclosure.url }}"
            },
            {
              "id": "e03cead0-6985-4454-a215-e65d2609c192",
              "name": "category_id",
              "type": "number",
              "value": 46
            },
            {
              "id": "67ef19df-9b97-436a-bf7b-527681b20ed7",
              "name": "default_image_id",
              "type": "number",
              "value": 17505
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "ab68c11d-646d-4ba1-9d59-2850620b2d54",
      "name": "Assign Category - External News",
      "type": "n8n-nodes-base.set",
      "position": [
        -368,
        -320
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "feb3e6cf-eb98-4f66-9ca1-ef24249f3d6e",
              "name": "article",
              "type": "string",
              "value": "={{ $json.contentSnippet }}"
            },
            {
              "id": "69452cc5-cacb-44a2-8a70-e5520bc0619c",
              "name": "image",
              "type": "string",
              "value": "={{ $json.enclosure.url }}"
            },
            {
              "id": "e03cead0-6985-4454-a215-e65d2609c192",
              "name": "category_id",
              "type": "number",
              "value": 43
            },
            {
              "id": "51842120-d3ff-477f-9a07-4a164688a135",
              "name": "default_image_id",
              "type": "number",
              "value": 17475
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "b7665485-5271-4a97-ae2f-150b78ab3444",
      "name": "Assign Category - Internal News",
      "type": "n8n-nodes-base.set",
      "position": [
        -368,
        80
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "feb3e6cf-eb98-4f66-9ca1-ef24249f3d6e",
              "name": "article",
              "type": "string",
              "value": "={{ $json.contentSnippet }}"
            },
            {
              "id": "69452cc5-cacb-44a2-8a70-e5520bc0619c",
              "name": "image",
              "type": "string",
              "value": "={{ $json.enclosure.url }}"
            },
            {
              "id": "e03cead0-6985-4454-a215-e65d2609c192",
              "name": "category_id",
              "type": "number",
              "value": 1
            },
            {
              "id": "29b74039-d1b9-4e68-b133-b3e6236135fd",
              "name": "default_image_id",
              "type": "number",
              "value": 17504
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "0156a1de-5fba-464f-8395-d1e13c69467c",
      "name": "Assign Category - Sports",
      "type": "n8n-nodes-base.set",
      "position": [
        -368,
        272
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "feb3e6cf-eb98-4f66-9ca1-ef24249f3d6e",
              "name": "article",
              "type": "string",
              "value": "={{ $json.contentSnippet }}"
            },
            {
              "id": "69452cc5-cacb-44a2-8a70-e5520bc0619c",
              "name": "image",
              "type": "string",
              "value": "={{ $json.enclosure.url }}"
            },
            {
              "id": "e03cead0-6985-4454-a215-e65d2609c192",
              "name": "category_id",
              "type": "number",
              "value": 1
            },
            {
              "id": "29b74039-d1b9-4e68-b133-b3e6236135fd",
              "name": "default_image_id",
              "type": "number",
              "value": 17509
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "dbd51dc3-cd0f-4deb-926e-378a3ea642e1",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -240,
        -1344
      ],
      "parameters": {
        "width": 592,
        "height": 800,
        "content": "# üóÇÔ∏è Assign Category & Default Image\n\nThis node sets:\n- The **WordPress category ID** for posts from this channel.  \n- A **default image ID** used when no media is found in the post.\n\n---\n\n### üî¢  Find category ID\n1. In WordPress ‚Üí **Posts ‚Üí Categories**.  \n2. Hover a category ‚Üí check the URL:\n   ```\n   ...tag_ID=12\n   ```\n   ‚Üí `12` = category ID.\n\n---\n\n### üñºÔ∏è  Find default image ID\n1. Go to **Media ‚Üí Library**, click an image.  \n2. Check URL:\n   ```\n   ...upload.php?item=17493\n   ```\n   ‚Üí `17493` = image ID.\n\n---\n\n### ‚öôÔ∏è Customize per channel\nEdit this **Set node** to assign different `category_id` and `default_image_id` values for each Telegram channel‚Äôs RSS trigger.\n\nüí° *Tip:* Using a unique default image per source keeps your news feed visually consistent even when Telegram posts have no media.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "e5f5b7ff-f5e4-4f19-8f52-f2d2cef12571",
      "name": "Just Image",
      "type": "n8n-nodes-base.set",
      "position": [
        1520,
        32
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "f5c134e3-8d74-4485-b6a6-e2c8b6b7c323",
              "name": "image_id",
              "type": "string",
              "value": "={{ $json.id }}"
            },
            {
              "id": "f0a2add4-7e9b-4366-a7e7-c6417f8b0324",
              "name": "video_id",
              "type": "string",
              "value": "no"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "7424faeb-0f5b-406b-8f48-45ad96e1b6fc",
      "name": "Assign Video",
      "type": "n8n-nodes-base.set",
      "position": [
        1520,
        272
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "8411a36d-64e7-4f82-aa53-386c2bb1ccc0",
              "name": "image_id",
              "type": "string",
              "value": "={{ $json.default_image_id }}"
            },
            {
              "id": "c31ceecb-fe21-4029-9ed6-b0dbfd6f97e5",
              "name": "video_id",
              "type": "string",
              "value": "={{ $json.id }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "c68e590e-8970-44fa-91a3-2208af785f3c",
      "name": "Merge",
      "type": "n8n-nodes-base.set",
      "position": [
        1808,
        176
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "3eb92149-a6a5-4e6b-b175-35a2524ef1be",
              "name": "image_id",
              "type": "string",
              "value": "={{$json.image_id}}"
            },
            {
              "id": "5d9291d0-4c7b-44a8-b80a-421d0e79750d",
              "name": "video_id",
              "type": "string",
              "value": "={{$json.video_id}}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "69c39d56-80cf-42cc-93c5-6f0ec89e512f",
      "name": "Enhanced Article",
      "type": "n8n-nodes-base.set",
      "position": [
        1808,
        -336
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "84c949a4-4b4e-4195-a180-44d4d373946c",
              "name": "enhanced_article",
              "type": "string",
              "value": "={{ $json.message.content.enhanced_article }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "797c88c9-7564-4ce6-a7a7-dd56acdbf49d",
      "name": "Article Meta",
      "type": "n8n-nodes-base.set",
      "position": [
        1808,
        -144
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "85519426-57f1-4cd7-aa07-9e5386a07013",
              "name": "title",
              "type": "string",
              "value": "={{ $json.message.content.headline }}"
            },
            {
              "id": "fd2ecbef-f715-4ab3-928e-af67ad0db4b3",
              "name": "article",
              "type": "string",
              "value": "={{ $json.message.content.article_body }}"
            },
            {
              "id": "6ee8ad8e-55b1-41da-b74b-b27f662c7f92",
              "name": "seo_description",
              "type": "string",
              "value": "={{ $json.message.content.seo_meta.meta_description }}"
            },
            {
              "id": "cef7ec5c-dd24-43dc-92ca-5482c334186c",
              "name": "seo_keywords",
              "type": "string",
              "value": "={{ $json.message.content.seo_meta.focus_keyword }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "eabd3be8-25f5-4e82-9f93-1ee2a7e8764f",
      "name": "Insert HTML5 Video player",
      "type": "n8n-nodes-base.set",
      "position": [
        2480,
        -128
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "08a91709-8280-4c1a-a87c-65317695d6cc",
              "name": "enhanced_article",
              "type": "string",
              "value": "=[playlist type=\"video\" ids=\"{{ $json.video_id }}\" tracklist=\"false\"]\n{{ $json.enhanced_article }}"
            },
            {
              "id": "e922ec79-e7f5-40db-ba46-69c69602eb64",
              "name": "title",
              "type": "string",
              "value": "={{ $json.title }}"
            },
            {
              "id": "cc68b6ed-ce5b-409f-b5ab-f04e695bfa99",
              "name": "article",
              "type": "string",
              "value": "={{ $json.article }}"
            },
            {
              "id": "84b6b9de-c89c-42df-9a77-8954ac3f0bd6",
              "name": "seo_description",
              "type": "string",
              "value": "={{ $json.seo_description }}"
            },
            {
              "id": "f6b6ba91-b6bb-4471-81db-eec391b0f1a9",
              "name": "seo_keywords",
              "type": "string",
              "value": "={{ $json.seo_keywords }}"
            },
            {
              "id": "abc5f879-79b6-4667-b72f-615033c2e5d7",
              "name": "image_id",
              "type": "string",
              "value": "={{ $json.image_id }}"
            },
            {
              "id": "031ca6b8-5890-42d2-91cc-a96d9abe1684",
              "name": "video_id",
              "type": "string",
              "value": "={{ $json.video_id }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "cd9891a6-cec1-4f33-8ddb-6ef4c7b8dc77",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        32,
        528
      ],
      "parameters": {
        "width": 672,
        "height": 336,
        "content": "### üìù Telegram ‚Üí WordPress Media Workflow\n\nPurpose: Download images/videos from Telegram, detect type, and upload to WordPress.\n\n### Flow:\n- Download Media ‚Äì HTTP Request gets file from Telegram URL.\n- Upload to WP ‚Äì HTTP Request2 posts file to /wp-json/wp/v2/media with proper headers.\n- Detect Type ‚Äì OpenAI node checks if file is image or video.\n- Switch & Assign IDs ‚Äì Routes media: image ‚Üí Just Image, video ‚Üí Assign Video. Uses default image if needed.\n- Merge ‚Äì Combines final media IDs for downstream use.\n\n### Customizations:\n- Change Default Image ID node for fallback image.\n- Update WP URL & credentials in HTTP Request2."
      },
      "typeVersion": 1
    },
    {
      "id": "d580d8cf-63b7-4bfc-995c-051339f1ed8b",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1040,
        -864
      ],
      "parameters": {
        "width": 544,
        "height": 416,
        "content": "## üìù OpenAI Article Editing Prompt\n\n### Purpose: \nRewrite news articles in English, adding subtle pro-democracy/American context while keeping facts accurate.\n\n### Key Features:\nHTML formatting: <p>, <h2>/<h3>, <strong>, <em>, <ul>/<ol>, <blockquote>\n\nStructure: Short paragraphs, strong lede, lists for stats/examples, quotes for officials/experts\n\nOutput JSON: headline, article_body, word_count, editors_notes, changes_summary, seo_meta\n\n### Customizations: \nAdjust tone, context rules, HTML tags, or SEO fields to fit your portal."
      },
      "typeVersion": 1
    },
    {
      "id": "56dcc283-d822-44f7-8b1a-0fc0eb07fa5f",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2512,
        112
      ],
      "parameters": {
        "width": 352,
        "height": 224,
        "content": "## üìù WordPress Publish Node\n\nPublishes articles via REST API with title, content, excerpt, categories, featured image, and metadata.\n\n### Tips:\nUpdate URL to your WordPress site.\nEnsure credentials match."
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "09ed99ed-3e4a-45f2-ad24-db0e29aa7d71",
  "connections": {
    "If": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Insert HTML5 Video player",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Merge4",
            "type": "main",
            "index": 3
          }
        ]
      ]
    },
    "Merge2": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge4": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Just Image",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Assign Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Just Image": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Message a model4",
            "type": "main",
            "index": 0
          },
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get Category ID",
            "type": "main",
            "index": 0
          },
          {
            "node": "Default Image ID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Article Meta": {
      "main": [
        [
          {
            "node": "Merge4",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Assign Video": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        []
      ]
    },
    "HTTP Request2": {
      "main": [
        [
          {
            "node": "Message a model",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge2",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "HTTP Request3": {
      "main": [
        []
      ]
    },
    "Get Category ID": {
      "main": [
        [
          {
            "node": "Merge4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Default Image ID": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Enhanced Article": {
      "main": [
        [
          {
            "node": "Merge4",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Message a model4": {
      "main": [
        [
          {
            "node": "Message a model6",
            "type": "main",
            "index": 0
          },
          {
            "node": "Article Meta",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model6": {
      "main": [
        [
          {
            "node": "Enhanced Article",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram RSS Feed 1": {
      "main": [
        [
          {
            "node": "Assign Category - News",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram RSS Feed 2": {
      "main": [
        [
          {
            "node": "Assign Category - External News",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram RSS Feed 3": {
      "main": [
        [
          {
            "node": "Assign Category - Social",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram RSS Feed 4": {
      "main": [
        [
          {
            "node": "Assign Category - Internal News",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram RSS Feed 5": {
      "main": [
        [
          {
            "node": "Assign Category - Sports",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Assign Category - News": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Assign Category - Social": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Assign Category - Sports": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert HTML5 Video player": {
      "main": [
        [
          {
            "node": "HTTP Request3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Assign Category - External News": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Assign Category - Internal News": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}