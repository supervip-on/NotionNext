{
  "id": "B6I2hQxa2qnYpA4f",
  "meta": {
    "name": "Create Weekly Space Newsletter with NASA APIs, GPT-4 & Google Workspace",
    "id": 10911
  },
  "name": "Generate weekly space newsletter from NASA APIs with AI summaries",
  "tags": [
    {
      "id": "KOHvL9z8ZxMwMkrx",
      "name": "Content Creation",
      "createdAt": "2025-11-17T09:38:26.303Z",
      "updatedAt": "2025-11-17T09:38:26.303Z"
    },
    {
      "id": "LTh964ocWL9thMj3",
      "name": "NASA",
      "createdAt": "2025-11-17T09:38:26.326Z",
      "updatedAt": "2025-11-17T09:38:26.326Z"
    },
    {
      "id": "XeeDOJWtDUdyci0Y",
      "name": "AI",
      "createdAt": "2025-11-17T09:27:50.003Z",
      "updatedAt": "2025-11-17T09:27:50.003Z"
    },
    {
      "id": "phZIlqQvUrLa9be6",
      "name": "Newsletter",
      "createdAt": "2025-11-17T09:27:49.952Z",
      "updatedAt": "2025-11-17T09:27:49.952Z"
    },
    {
      "id": "plNHcS4PLJ98NEbM",
      "name": "Automation",
      "createdAt": "2025-11-17T09:38:26.256Z",
      "updatedAt": "2025-11-17T09:38:26.256Z"
    }
  ],
  "nodes": [
    {
      "id": "de8104e3-1ffd-40ab-9db6-b9ad3eb8b099",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -784,
        -272
      ],
      "parameters": {
        "width": 380,
        "height": 916,
        "content": "# Weekly Space Newsletter Generator\n\nThis workflow automatically generates and distributes a comprehensive space newsletter every week using NASA APIs and AI.\n\n## How it works\n\n1. **Weekly Trigger**: Runs every Monday at 9 AM\n2. **Fetch NASA Data**: Collects data from multiple NASA APIs (APOD, DONKI, NeoWS)\n3. **AI Content Generation**: Uses OpenAI to create engaging newsletter content\n4. **Document Creation**: Generates a Google Doc with the newsletter\n5. **PDF Export**: Converts the document to PDF format\n6. **Distribution**: Sends via email and archives to Notion\n7. **Notifications**: Sends success confirmation to Slack\n\n## Setup Required\n\n1. Get NASA API key from https://api.nasa.gov\n2. Configure OpenAI credentials\n3. Connect Google Workspace accounts\n4. Set up Notion database (optional)\n5. Configure Slack webhook (optional)\n\n## Customization\n\n- Adjust the schedule trigger time\n- Modify the AI prompt for different writing styles\n- Add/remove NASA API endpoints\n- Configure distribution channels"
      },
      "typeVersion": 1
    },
    {
      "id": "78eab1bc-267d-487a-8566-0d085dbc5bf8",
      "name": "Sticky Note 2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -176,
        -160
      ],
      "parameters": {
        "color": 7,
        "width": 250,
        "height": 308,
        "content": "## Step 1: API Configuration\n\nReplace 'DEMO_KEY' with your actual NASA API key in the Code node.\n\nAPIs used:\n- APOD (Astronomy Picture of the Day)\n- DONKI (Space Weather)\n- NeoWS (Near Earth Objects)"
      },
      "typeVersion": 1
    },
    {
      "id": "5ec91fb5-94e9-4456-9dd8-54864cd297b7",
      "name": "Sticky Note 3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        800,
        -96
      ],
      "parameters": {
        "color": 7,
        "width": 250,
        "height": 230,
        "content": "## Step 2: AI Content Generation\n\nCustomize the prompt to change:\n- Writing style and tone\n- Newsletter sections\n- Language preferences\n- Content focus areas"
      },
      "typeVersion": 1
    },
    {
      "id": "1d65686f-a378-48d5-864f-0b07f122d55a",
      "name": "Sticky Note 4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1568,
        -96
      ],
      "parameters": {
        "color": 7,
        "width": 250,
        "height": 214,
        "content": "## Step 3: Distribution\n\nConfigure your email recipients and archive destinations.\n\nNote: The Notion node is disabled by default - enable and configure with your database ID if needed."
      },
      "typeVersion": 1
    },
    {
      "id": "b889629f-6426-4204-acb6-ea0c77f4b9cc",
      "name": "Weekly Monday Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -320,
        176
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtDay": [
                1
              ],
              "triggerAtHour": 9
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "a3b98e01-860d-4247-9484-326dcceda351",
      "name": "Prepare NASA API URLs",
      "type": "n8n-nodes-base.code",
      "position": [
        -96,
        176
      ],
      "parameters": {
        "jsCode": "// Calculate dates for the past 7 days\nconst today = new Date();\nconst endDate = today.toISOString().split('T')[0];\n\nconst startDateObj = new Date();\nstartDateObj.setDate(today.getDate() - 7);\nconst startDate = startDateObj.toISOString().split('T')[0];\n\n// NASA API key - Replace with your actual API key\nconst apiKey = 'DEMO_KEY'; // Get your free key at https://api.nasa.gov\n\n// Generate API URLs\nconst apodUrl = `https://api.nasa.gov/planetary/apod?api_key=${apiKey}&start_date=${startDate}&end_date=${endDate}`;\nconst donkiUrl = `https://api.nasa.gov/DONKI/notifications?startDate=${startDate}&endDate=${endDate}&type=all&api_key=${apiKey}`;\nconst neowsUrl = `https://api.nasa.gov/neo/rest/v1/feed?start_date=${startDate}&end_date=${endDate}&api_key=${apiKey}`;\nconst epicUrl = `https://api.nasa.gov/EPIC/api/natural/date/${endDate}?api_key=${apiKey}`;\n\nreturn [\n  {\n    json: {\n      startDate: startDate,\n      endDate: endDate,\n      apodUrl: apodUrl,\n      donkiUrl: donkiUrl,\n      neowsUrl: neowsUrl,\n      epicUrl: epicUrl\n    }\n  }\n];"
      },
      "typeVersion": 2
    },
    {
      "id": "33c66b53-29c2-4a64-9a9e-8258de1dfcaa",
      "name": "Fetch Astronomy Picture",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        160,
        80
      ],
      "parameters": {
        "url": "={{ $json.apodUrl }}",
        "options": {}
      },
      "typeVersion": 4.3
    },
    {
      "id": "a7ebeaed-47b4-445b-96ff-c87e2b0f2e92",
      "name": "Fetch Space Weather",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        160,
        272
      ],
      "parameters": {
        "url": "={{ $json.donkiUrl }}",
        "options": {}
      },
      "typeVersion": 4.3
    },
    {
      "id": "8ea4185a-ea46-4418-9988-c31a8956c9f3",
      "name": "Combine NASA Data",
      "type": "n8n-nodes-base.merge",
      "position": [
        384,
        176
      ],
      "parameters": {
        "mode": "combine",
        "options": {},
        "combineBy": "combineAll"
      },
      "typeVersion": 3.2
    },
    {
      "id": "565a8766-7727-4610-8594-f398076859fe",
      "name": "Generate Newsletter with AI",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        816,
        176
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4"
        },
        "options": {},
        "responses": {
          "values": [
            {}
          ]
        },
        "builtInTools": {}
      },
      "typeVersion": 2
    },
    {
      "id": "7c08091a-002c-4432-910c-fc0e836aea48",
      "name": "Create Google Doc",
      "type": "n8n-nodes-base.googleDocs",
      "position": [
        1168,
        176
      ],
      "parameters": {
        "title": "=SpaceWeekly_{{ $now.toFormat('yyyy-MM-dd') }}",
        "folderId": "root"
      },
      "typeVersion": 2
    },
    {
      "id": "f903e34f-cef6-421c-99c4-670cc9629683",
      "name": "Insert Newsletter Content",
      "type": "n8n-nodes-base.googleDocs",
      "position": [
        1392,
        176
      ],
      "parameters": {
        "actionsUi": {
          "actionFields": [
            {
              "text": "={{ $('Generate Newsletter with AI').item.json.output }}",
              "action": "insert"
            }
          ]
        },
        "operation": "update"
      },
      "typeVersion": 2
    },
    {
      "id": "ff783d7b-c252-4944-bc40-396d84580ee2",
      "name": "Convert to PDF",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        1616,
        176
      ],
      "parameters": {
        "fileId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('Insert Newsletter Content').item.json.documentId }}"
        },
        "options": {
          "fileName": "={{ 'SpaceWeekly_' + $now.toFormat('yyyy-MM-dd') + '.pdf' }}",
          "binaryPropertyName": "data",
          "googleFileConversion": {
            "conversion": {
              "docsToFormat": "application/pdf"
            }
          }
        },
        "operation": "download"
      },
      "typeVersion": 3
    },
    {
      "id": "2709fadb-d09c-40f6-8bb6-bc52e04d410f",
      "name": "Send Newsletter Email",
      "type": "n8n-nodes-base.gmail",
      "position": [
        1840,
        80
      ],
      "webhookId": "aae42c68-74f4-454c-9738-67f8cb439331",
      "parameters": {
        "sendTo": "your-email@example.com",
        "message": "={{ $('Generate Newsletter with AI').item.json.output }}",
        "options": {
          "attachmentsUi": {
            "attachmentsBinary": [
              {}
            ]
          }
        },
        "subject": "=Weekly Space Newsletter - {{ $now.toFormat('MMM dd, yyyy') }}"
      },
      "typeVersion": 2.1
    },
    {
      "id": "733dfe5a-36f1-456e-85f1-215ecabc3a3a",
      "name": "Archive to Notion",
      "type": "n8n-nodes-base.notion",
      "disabled": true,
      "position": [
        1840,
        272
      ],
      "parameters": {
        "title": "={{ $('Generate Newsletter with AI').item.json.title }}",
        "pageId": {
          "__rl": true,
          "mode": "id",
          "value": "YOUR_NOTION_DATABASE_ID"
        },
        "options": {}
      },
      "typeVersion": 2.2
    },
    {
      "id": "973c0c71-10f5-43c3-8034-d0972cfd48b6",
      "name": "Wait for Distribution",
      "type": "n8n-nodes-base.merge",
      "position": [
        2064,
        176
      ],
      "parameters": {},
      "typeVersion": 3.2
    },
    {
      "id": "494c93e8-106b-4317-89f8-ccfe85b5e4c6",
      "name": "Notify Success on Slack",
      "type": "n8n-nodes-base.slack",
      "position": [
        2288,
        176
      ],
      "webhookId": "0385315c-8e9c-4d0c-a510-8d97eea172dc",
      "parameters": {
        "text": "âœ¨ Weekly Space Newsletter has been successfully generated and distributed! ðŸš€\nCheck your email for the latest space updates.",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "mode": "list",
          "value": "general"
        },
        "otherOptions": {},
        "authentication": "oAuth2"
      },
      "typeVersion": 2.3
    },
    {
      "id": "eab91216-676e-47dd-b365-eee6c402ceb6",
      "name": "Limit API Results",
      "type": "n8n-nodes-base.limit",
      "position": [
        592,
        176
      ],
      "parameters": {},
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "d63ee217-f19f-4243-8ee0-47db25db8f42",
  "connections": {
    "Convert to PDF": {
      "main": [
        [
          {
            "node": "Send Newsletter Email",
            "type": "main",
            "index": 0
          },
          {
            "node": "Archive to Notion",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Archive to Notion": {
      "main": [
        [
          {
            "node": "Wait for Distribution",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Combine NASA Data": {
      "main": [
        [
          {
            "node": "Limit API Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Google Doc": {
      "main": [
        [
          {
            "node": "Insert Newsletter Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit API Results": {
      "main": [
        [
          {
            "node": "Generate Newsletter with AI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Space Weather": {
      "main": [
        [
          {
            "node": "Combine NASA Data",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Prepare NASA API URLs": {
      "main": [
        [
          {
            "node": "Fetch Astronomy Picture",
            "type": "main",
            "index": 0
          },
          {
            "node": "Fetch Space Weather",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Newsletter Email": {
      "main": [
        [
          {
            "node": "Wait for Distribution",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait for Distribution": {
      "main": [
        [
          {
            "node": "Notify Success on Slack",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Weekly Monday Trigger": {
      "main": [
        [
          {
            "node": "Prepare NASA API URLs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Astronomy Picture": {
      "main": [
        [
          {
            "node": "Combine NASA Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert Newsletter Content": {
      "main": [
        [
          {
            "node": "Convert to PDF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Newsletter with AI": {
      "main": [
        [
          {
            "node": "Create Google Doc",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}